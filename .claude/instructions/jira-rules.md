# Claude Code - Jira 작업 규칙

이 문서는 **Claude Code (AI Agent)**가 Jira 관련 작업을 처리할 때 따라야 할 규칙과 지침입니다.
POPUP STUDIO의 Jira 운영 원칙을 기반으로 작성되었습니다.

---

## 목차

1. [이슈 타입 구분 원칙](#이슈-타입-구분-원칙)
2. [담당자 지정 원칙](#담당자-지정-원칙)
3. [이슈 생성 규칙](#이슈-생성-규칙)
4. [이슈 조회 및 추천 규칙](#이슈-조회-및-추천-규칙)
5. [상태 전환 규칙](#상태-전환-규칙)
6. [자동화 작업 규칙](#자동화-작업-규칙)
7. [커뮤니케이션 원칙](#커뮤니케이션-원칙)

---

## 이슈 타입 구분 원칙

### Epic, Story, Task, Sub-Task 판단 기준

Claude Code가 이슈 생성 요청을 받았을 때, 다음 기준에 따라 적절한 이슈 타입을 제안해야 합니다:

#### 1. Epic (에픽) 🏗️

**조건**:
- 완료 기간: **몇 주 ~ 몇 달**
- 여러 Story를 포함하는 큰 프로젝트
- 명확한 비즈니스 가치가 있음
- 여러 팀원이 협업

**키워드**:
- "프로젝트", "시스템 구축", "런칭", "리뉴얼", "캠페인", "마이그레이션"

**예시**:
- "신규 회원가입 시스템 구축"
- "브랜드 리뉴얼 프로젝트"
- "결제 시스템 마이그레이션"

**담당자**:
- 📋 **책임자/리드** (선택사항)
- PM, 팀장, 프로젝트 조율자
- 지정하지 않아도 됨

---

#### 2. Story (스토리) 🏠

**조건**:
- 완료 기간: **며칠 ~ 1주**
- 사용자나 비즈니스에 가치를 제공
- 독립적으로 완료 가능한 기능 단위
- "~할 수 있다" 형태로 표현 가능

**키워드**:
- "사용자가 ~할 수 있다"
- "관리자가 ~할 수 있다"
- 사용자 경험 개선
- 새로운 기능

**예시**:
- "사용자가 소셜 로그인으로 회원가입할 수 있다"
- "메인 페이지 디자인 리뉴얼"
- "결제 API 연동"

**담당자**:
- 📋 **책임자/리드** (선택사항)
- Story 완성을 책임지고 조율하는 사람
- 여러 Sub-Task가 있을 때 전체를 관리하는 리드
- 혼자 작업하거나 간단한 Story는 지정하지 않아도 됨
- **실제 작업은 Sub-Task에 담당자 지정**

---

#### 3. Task (태스크) 🔨

**조건**:
- 완료 기간: **반나절 ~ 며칠**
- 기술적이거나 운영적인 독립 작업
- Story에 포함되지 않음
- 사용자가 직접 체감하지 않는 작업

**키워드**:
- "~한다" (Story와 달리 "~할 수 있다"가 아님)
- 기술 부채, 문서 작성, 환경 설정, 분석, 조사, 운영 업무

**예시**:
- "서버 로그 모니터링 설정"
- "경쟁사 서비스 분석 보고서 작성"
- "코드 리팩토링"
- "팀 온보딩 문서 업데이트"

**담당자**:
- 👤 **실행 담당자** (필수)
- 실제로 손으로 일하는 사람
- 반드시 한 명만 지정
- **매일 아침 미할당 Task를 확인하고 스스로 선택**

---

#### 4. Sub-Task (서브태스크) 🔩

**조건**:
- 완료 기간: **몇 시간 ~ 하루**
- Story나 Task를 완료하기 위한 작은 단계
- 상위 이슈에 종속
- 혼자서 완료 가능한 작은 단위

**주의사항**:
- ❌ Sub-Task만 단독으로 생성하지 않음
- ❌ 너무 많이 나누지 않음 (5개 이하 권장)
- ✅ 상위 이슈 완료에 필요한 것만 생성

**예시**:
- Story "신규 회원가입 페이지 개발"의 Sub-Task:
  - UI 디자인
  - 프론트엔드 개발
  - API 개발
  - QA 테스트

**담당자**:
- 👤 **실행 담당자** (필수)
- 이 Sub-Task를 직접 수행하는 사람
- 한 명만 지정
- **매일 아침 미할당 Sub-Task를 확인하고 스스로 선택**

---

### 의사결정 플로우

Claude Code는 다음 질문을 통해 이슈 타입을 결정해야 합니다:

```
1. 여러 달 걸리는 큰 프로젝트인가?
   YES → Epic 생성 → Story들로 나누기
   NO  → 다음 질문

2. 사용자에게 가치를 제공하나? (사용자가 체감하나?)
   YES → Story 생성
   NO  → Task 생성

3. 작업이 복잡하거나 여러 단계로 나눠야 하나?
   YES → Sub-Task로 나누기
   NO  → 이슈 생성 완료
```

---

## 담당자 지정 원칙

### ⚠️ 핵심 규칙

**Epic과 Story**:
- 📋 **책임자/리드**를 지정 (선택사항)
- 직접 일하는 사람이 아니라 **전체를 관리하고 조율하는 사람**
- 여러 사람이 협업하는 경우, 전체 진행을 책임지는 리드
- **지정하지 않아도 됨**

**Task와 Sub-Task**:
- 👤 **실행 담당자**를 지정 (필수)
- 실제로 **손으로 일하는 사람**
- 코드를 짜거나, 디자인을 만들거나, 문서를 작성하는 사람
- **반드시 한 명만 지정** (공동 작업은 Sub-Task로 나누기)

### Claude Code가 따라야 할 규칙

1. **이슈 생성 시 담당자 지정 안내**
   ```
   - Epic/Story 생성 시: "책임자/리드를 지정하시겠습니까? (선택사항)"
   - Task/Sub-Task 생성 시: "실행 담당자를 지정해주세요 (필수)"
   ```

2. **잘못된 담당자 지정 감지**
   ```
   - Epic/Story에 실행 담당자가 지정되려 하면 경고
   - "Epic/Story는 책임자/리드를 지정하는 것이 일반적입니다.
     실제 작업은 Sub-Task에 담당자를 지정해주세요."
   ```

3. **미할당 이슈 조회 시**
   ```
   - `/daily-standup` 명령 시 **Task와 Sub-Task만** 표시
   - Epic이나 Story는 표시하지 않음
   - "선택 가능한 Task/Sub-Task" 형태로 표현
   ```

4. **담당자 할당 시**
   ```
   - Task/Sub-Task만 `/assign-me` 허용
   - Epic/Story에 `/assign-me` 사용 시:
     "Epic/Story는 책임자 지정이 선택사항입니다.
      실제 작업을 수행하시려면 Sub-Task를 생성하고 할당해주세요."
   ```

---

## 이슈 생성 규칙

### 1. 이슈 제목 작성 원칙

Claude Code가 이슈를 생성할 때 다음 형식을 따라야 합니다:

**Story**:
- ✅ "[주체]가 [행동]할 수 있다" 형식
- ✅ 사용자 관점에서 작성
- 예: "사용자가 소셜 로그인으로 회원가입할 수 있다"

**Task**:
- ✅ "[대상]을/를 [행동]한다" 형식
- ✅ 명확한 작업 내용
- 예: "서버 로그 모니터링 설정"

**Epic**:
- ✅ 프로젝트나 목표 중심
- ✅ 포괄적인 표현
- 예: "신규 회원가입 시스템 구축"

**Sub-Task**:
- ✅ 구체적이고 실행 가능한 단계
- ✅ 짧고 명확하게
- 예: "회원가입 UI 개발"

### 2. 이슈 설명 작성 원칙

Claude Code는 이슈 설명에 다음 항목을 포함해야 합니다:

```markdown
**목적**: 왜 이 작업이 필요한가?
(배경, 비즈니스 가치, 문제점 설명)

**요구사항**: 무엇을 만들어야 하는가?
- 구체적인 요구사항 나열
- 기술적 제약사항 (있다면)
- 참고 자료 링크 (Figma, 문서 등)

**수용 기준**: 어떻게 되어야 완료인가?
- 완료 조건 명확히 정의
- 테스트 가능한 기준
- 결과물 형태

**관련 정보**:
- 참고 문서 링크
- 연관된 이슈
- 기타 참고사항
```

### 3. 이슈 생성 시 확인 사항

Claude Code는 이슈 생성 전에 다음을 확인해야 합니다:

1. **중복 이슈 확인**
   ```
   - 유사한 제목의 이슈가 이미 존재하는지 검색
   - 중복 시 사용자에게 알림
   ```

2. **프로젝트 키 확인**
   ```
   - 올바른 프로젝트에 이슈를 생성하는지 확인
   - 프로젝트 키를 모르면 사용자에게 질문
   ```

3. **Epic 연결 확인**
   ```
   - Story 생성 시 관련 Epic이 있는지 확인
   - Epic 연결 제안
   ```

4. **Sub-Task의 상위 이슈 확인**
   ```
   - Sub-Task는 반드시 상위 이슈(Story/Task) 지정
   - 상위 이슈 없이 Sub-Task 생성 시도 시 경고
   ```

---

## 이슈 조회 및 추천 규칙

### 1. `/daily-standup` 명령어 처리

Claude Code는 다음 정보를 제공해야 합니다:

**미할당 이슈 섹션**:
```
### 📋 선택 가능한 Task/Sub-Task

**높은 우선순위**:
- [PROJ-123] 서버 로그 모니터링 설정 (Task)
- [PROJ-145] 회원가입 UI 개발 (Sub-Task)

**중간 우선순위**:
- [PROJ-150] 코드 리팩토링 (Task)

⚠️ Epic/Story는 책임자 지정이 선택사항이므로 표시하지 않습니다.
```

**내 할당 이슈 섹션**:
```
### 👤 내가 담당 중인 이슈

**In Progress**:
- [PROJ-120] 결제 API 연동 (Story) - 진행 중
- [PROJ-121] API 엔드포인트 개발 (Sub-Task) - 진행 중

**To Do**:
- [PROJ-130] 테스트 코드 작성 (Task)
```

### 2. 이슈 추천 규칙

Claude Code는 다음 기준으로 이슈를 추천해야 합니다:

**우선순위**:
1. Priority: High → Medium → Low
2. 오래된 이슈 (생성일 기준)
3. 곧 마감되는 이슈 (Due Date 기준)

**사용자 역량 고려**:
- 과거 완료한 이슈 타입 참고
- 유사한 라벨/컴포넌트의 이슈 추천

**팀 상황 고려**:
- 병목 구간(Blocked) 이슈 우선 제안
- 팀원이 많이 할당된 Epic의 Sub-Task 제안

---

## 상태 전환 규칙

### 이슈 상태 변경 시 확인 사항

Claude Code는 상태 전환 시 다음을 확인해야 합니다:

1. **To Do → In Progress**
   ```
   - 담당자가 지정되어 있는지 확인
   - 담당자 없으면: "먼저 담당자를 지정해주세요"
   ```

2. **In Progress → Done**
   ```
   - Sub-Task가 있는 Story/Task의 경우:
     "모든 Sub-Task가 완료되었는지 확인해주세요"
   - 완료 코멘트 추가 제안:
     "완료 내용을 코멘트로 남기시겠습니까?"
   ```

3. **Done → Reopened**
   ```
   - 재오픈 사유 입력 제안:
     "재오픈 사유를 코멘트로 남겨주세요"
   ```

### Epic/Story 자동 상태 관리

Claude Code는 Epic/Story의 진행 상황을 자동으로 파악해야 합니다:

```
- Epic 내 모든 Story가 Done → Epic도 Done으로 제안
- Story 내 모든 Sub-Task가 Done → Story도 Done으로 제안
- Epic/Story에 새 Sub-Task 추가 시 → In Progress로 변경 제안
```

---

## 자동화 작업 규칙

### 1. `/weekly-report` 처리

Claude Code는 주간 보고서를 다음과 같이 생성해야 합니다:

**데이터 수집**:
```
- 이번 주 완료된 이슈 조회 (Done 상태, 완료일 기준)
- 현재 진행 중인 이슈 조회 (In Progress 상태)
- 사용자가 담당한 이슈만 필터링
```

**보고서 구조**:
```markdown
# [이름] 주간 보고서 (YYYY-MM-DD ~ YYYY-MM-DD)

## ✅ 완료한 작업

### Story/Task
- [PROJ-123] 결제 API 연동
  - 완료일: 2025-11-04
  - 내용: 토스페이먼츠 API 연동 완료, 결제 플로우 테스트 완료

### Sub-Task
- [PROJ-145] 회원가입 UI 개발 (상위: [PROJ-140] 회원가입 기능 개발)
  - 완료일: 2025-11-05
  - 내용: 반응형 UI 구현, UX 개선

## 🚧 진행 중인 작업

- [PROJ-150] 성능 최적화 (60% 완료)
  - 다음 주까지 완료 예정

## 📝 다음 주 계획

- [PROJ-160] 관리자 페이지 개발 시작
- [PROJ-165] 테스트 코드 작성

## ⚠️ 이슈 사항

(특별한 이슈 없음)
```

**Confluence 페이지 생성**:
- Space: 팀별 Space 또는 개인 Space
- 페이지 제목: `[이름] 주간 보고서 - YYYY년 W주차`
- 상위 페이지: `주간 보고서 아카이브`

### 2. `/assign-me` 처리

Claude Code는 다음과 같이 처리해야 합니다:

**Task/Sub-Task인 경우**:
```
1. 현재 담당자 확인
2. 담당자가 없으면 바로 할당
3. 담당자가 있으면: "현재 [담당자]가 담당 중입니다. 변경하시겠습니까?"
4. 할당 후 상태가 To Do면 In Progress로 변경 제안
```

**Epic/Story인 경우**:
```
경고 메시지 표시:
"[PROJ-123]는 Epic/Story입니다.
Epic/Story는 책임자 지정이 선택사항이며, 실제 작업은 Sub-Task에 할당해야 합니다.
이 Epic/Story의 Sub-Task 목록을 보시겠습니까?"
```

### 3. Slack 스레드 저장 (`/save-slack-thread`)

Claude Code는 다음 작업을 수행해야 합니다:

1. **Slack 스레드 분석**
   ```
   - 대화 주제 파악
   - 핵심 의사결정 사항 추출
   - 참여자 목록 정리
   ```

2. **Confluence 페이지 생성**
   ```markdown
   # [주제] - Slack 대화 기록

   **일시**: YYYY-MM-DD HH:MM
   **참여자**: @user1, @user2, @user3
   **관련 Jira 이슈**: [PROJ-123], [PROJ-145]

   ## 핵심 의사결정

   - 결정 사항 1
   - 결정 사항 2

   ## 대화 내용

   [대화 내용 정리 또는 전문]

   ## 액션 아이템

   - [ ] TODO 1 (담당: @user1)
   - [ ] TODO 2 (담당: @user2)
   ```

3. **Jira 이슈 연결**
   ```
   - 관련 Jira 이슈에 Confluence 페이지 링크 코멘트 추가
   - "Slack 대화 내용이 Confluence에 기록되었습니다: [링크]"
   ```

---

## 커뮤니케이션 원칙

### 1. 명확하고 간결한 응답

Claude Code는 다음과 같이 응답해야 합니다:

**✅ 좋은 예**:
```
PROJ-123 이슈를 생성했습니다:
- 타입: Story
- 제목: 사용자가 소셜 로그인으로 회원가입할 수 있다
- 담당자: 미지정 (Story는 책임자 지정이 선택사항입니다)

Sub-Task를 생성하시겠습니까?
```

**❌ 나쁜 예**:
```
네, 이슈를 만들었어요! 정말 좋은 아이디어네요!
이제 팀원들이 이 이슈를 보고 작업할 수 있을 거예요.
```

### 2. 컨텍스트 제공

Claude Code는 항상 충분한 컨텍스트를 제공해야 합니다:

```
[PROJ-123] 결제 API 연동 (Story)
├─ [PROJ-124] 토스페이먼츠 연동 (Sub-Task) - Done
├─ [PROJ-125] 결제 테스트 (Sub-Task) - In Progress ← 현재 작업 중
└─ [PROJ-126] 환불 기능 개발 (Sub-Task) - To Do

현재 [PROJ-125]를 진행 중이시네요.
완료하면 [PROJ-126]을 진행하시겠습니까?
```

### 3. 자율성 존중

Claude Code는 결정권을 사용자에게 두어야 합니다:

**✅ 좋은 예**:
```
미할당 Task 3개를 발견했습니다:
1. [PROJ-150] 성능 최적화 (High)
2. [PROJ-155] 테스트 코드 작성 (Medium)
3. [PROJ-160] 문서 업데이트 (Low)

어떤 Task를 담당하시겠습니까?
```

**❌ 나쁜 예**:
```
[PROJ-150]을 담당자로 지정했습니다.
이 작업이 가장 우선순위가 높으니 먼저 완료해주세요.
```

### 4. 오류 및 경고 처리

Claude Code는 명확한 오류 메시지를 제공해야 합니다:

```
❌ 오류: Sub-Task는 상위 이슈 없이 생성할 수 없습니다.

💡 해결 방법:
1. 먼저 상위 Story 또는 Task를 생성하세요
2. 또는 기존 Story/Task에 Sub-Task로 추가하세요

기존 Story/Task 목록을 보시겠습니까?
```

---

## 규칙 적용 우선순위

Claude Code는 다음 우선순위로 규칙을 적용해야 합니다:

1. **필수 규칙** (반드시 준수):
   - Sub-Task는 상위 이슈 없이 생성 불가
   - Task/Sub-Task는 담당자 필수
   - Epic/Story는 담당자 선택사항

2. **권장 규칙** (제안 형태):
   - 이슈 제목 형식
   - 이슈 설명 구조
   - Epic 연결

3. **최적화 규칙** (사용자 경험 향상):
   - 중복 이슈 확인
   - 우선순위 기반 추천
   - 자동 상태 전환 제안

---

## 특수 상황 처리

### 1. 사용자가 규칙을 위반하려 할 때

```
❌ 사용자: "Sub-Task 만들어줘"
✅ Claude Code:
   "Sub-Task는 상위 이슈(Story 또는 Task)에 속해야 합니다.
   어떤 이슈의 Sub-Task로 만드시겠습니까?"
```

### 2. 사용자가 Epic/Story에 담당자를 지정하려 할 때

```
⚠️ Claude Code:
   "[PROJ-123]는 Story입니다.
   Story는 책임자/리드를 지정하는 것이 일반적이며, 선택사항입니다.

   실제 작업을 수행하시려면:
   1. 이 Story에 Sub-Task를 생성하세요
   2. Sub-Task에 본인을 담당자로 지정하세요

   계속 진행하시겠습니까?"
```

### 3. Task vs Story 판단이 애매할 때

```
🤔 Claude Code:
   "이 작업은 Story와 Task 모두 가능합니다:

   Story로 만들기: 사용자가 이 기능을 직접 사용하는 경우
   Task로 만들기: 내부 작업이나 준비 작업인 경우

   사용자가 이 작업의 결과를 체감할 수 있나요?"
```

---

## 체크리스트

Claude Code가 Jira 작업을 처리하기 전에 확인할 항목:

### 이슈 생성 시

- [ ] 올바른 이슈 타입을 선택했는가?
- [ ] 제목이 명확하고 형식에 맞는가?
- [ ] 설명에 목적, 요구사항, 수용 기준이 포함되어 있는가?
- [ ] 담당자 지정 규칙을 따르는가? (Epic/Story: 선택, Task/Sub-Task: 필수)
- [ ] Sub-Task의 경우 상위 이슈가 지정되어 있는가?
- [ ] 중복 이슈가 없는가?
- [ ] 관련 Epic이 있다면 연결했는가?

### 이슈 조회 시

- [ ] `/daily-standup`에서 Task/Sub-Task만 표시하는가?
- [ ] 우선순위를 고려하여 정렬했는가?
- [ ] 충분한 컨텍스트를 제공하는가?
- [ ] 사용자에게 선택권을 주는가?

### 상태 변경 시

- [ ] 상태 전환이 유효한가?
- [ ] 담당자가 지정되어 있는가?
- [ ] Sub-Task 완료 여부를 확인했는가?
- [ ] 상태 변경 사유를 코멘트로 남겼는가?

### 자동화 작업 시

- [ ] 데이터 수집이 정확한가?
- [ ] Confluence 페이지 구조가 올바른가?
- [ ] Jira 이슈와 연결되어 있는가?
- [ ] 사용자에게 결과를 명확히 전달했는가?

---

## 결론

이 규칙은 **POPUP STUDIO의 자율적 업무 관리 문화**를 지원하기 위해 작성되었습니다.

### 핵심 원칙

1. **Epic/Story는 책임자, Task/Sub-Task는 실행 담당자**
2. **자율성 존중**: 사용자가 선택하도록 제안
3. **명확한 커뮤니케이션**: 간결하고 정확하게
4. **일관성**: 모든 작업에 동일한 규칙 적용

### Claude Code의 역할

- 🤖 **보조자**: 규칙을 강제하지 않고 가이드 제공
- 📋 **관리자**: 이슈 정리 및 추천
- 🔗 **연결자**: Jira, Confluence, Slack 연동
- 📊 **분석가**: 업무 현황 파악 및 보고

---

**작성일**: 2025-11-06
**작성자**: Claude Code
**기반 문서**: `docs/jira-guidelines.md`
**버전**: 1.0
